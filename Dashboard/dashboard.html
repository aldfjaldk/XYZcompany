<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
        <title>Bluebuck Dashboard</title>
	   
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.min.js"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons"
      rel="stylesheet">
      <style>
        .dashboard{
            background-color: rgba(200, 200, 200, 0.2);
        }
      </style>
  </head>
  <body>
  
<div id="sidebar"></div>
<div id="header"></div>

    
<div class="wrapper">
    
    
<div class="body-overlay"></div>

        <!-- Page Content  -->
        <div id="content">
		
		<div class="top-navbar">
            <div id  = "header"></div>
            <nav class="navbar navbar-expand-lg">
                
                <div class="container-fluid">
                    
                    <button type="button" id="sidebarCollapse" class="d-xl-block d-lg-block d-md-mone d-none">
                        <span class="material-icons">arrow_back_ios</span>
                    </button>
					
					<a class="navbar-brand" href="#"> Dashboard </a>
					
                    <button class="d-inline-block d-lg-none ml-auto more-button" type="button" data-toggle="collapse"
					data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="material-icons">more_vert</span>
                    </button>

                    <div class="collapse navbar-collapse d-lg-block d-xl-block d-sm-none d-md-none d-none" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">   
                            
                        </ul>
                    </div>
                </div>
            </nav>
	    </div>
			
			
			<div class="main-content">
			
			<div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="card card-stats">
                                <div class="card-header">
                                    <div class="icon icon-rose">
                                       <span class="material-icons">attach_money</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <p class="category"><strong>Amount to be paid</strong></p>
                                    <h3 id="amountToPay" class="card-title">$0</h3>
                                </div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <a id = "currentBalance" href="#">Current balance : $0</a>
                                        <a id = "overdue" href="#">Over due : $0</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="card card-stats">
                                <div class="card-header">
                                    <div class="icon icon-success">
                                       <span class="material-icons">attach_money</span>

                                    </div>
                                </div>
                                <div class="card-content">
                                    <p class="category"><strong>Amount to be recieved</strong></p>
                                    <h3 id = "amountToReceive" class="card-title">$0</h3>
                                </div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <a id = "currentBalance2" href="#">Current balance : $0</a>
                                        <a id = "overdue2" href="#">Over due : $0</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="card card-stats">
                                <div class="card-header">
                                    <div class="icon icon-warning">
                                        <span class="material-icons">
attach_money
</span>

                                    </div>
                                </div>
                                <div class="card-content">
                                    <p class="category"><strong>Your expenses</strong></p>
                                    <h3 id = "expenses" class="card-title">$0</h3>
                                </div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">date_range</i> Track expenses
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="card card-stats">
                                <div class="card-header">
                                    <div class="icon icon-info">
                                    
<span class="material-icons">
follow_the_signs
</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <p class="category"><strong>Followers</strong></p>
                                    <h3 id = "followers" class="card-title">+0</h3>
                                </div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">update</i> Just Updated
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="card card-stats">
                                <div class="card-header">
                                    <div class="icon icon-success">
                                    
<span class="material-icons">
task
</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <p class="category"><strong>Projects</strong></p>
                                    <h3 id = "projects" class="card-title">+0</h3>
                                </div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">add</i> Add your projects here
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="card card-stats">
                                <div class="card-header">
                                    <div class="icon icon-warning">
                                    
<span class="material-icons">
notes
</span>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <p class="category"><strong>Records</strong></p>
                                    <h3 id = "records" class="card-title">+0</h3>
                                </div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">check</i> Account watchlist
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
					
					
					<div class="row">
                        <div class="col-lg-12 col-md-12">
                          <div class="card" style="min-height: 485px">
                            <div class="card-header card-header-text">
                              <div class="container">
                                <h2>Income vs Expenses</h2>
                                <div>
                                  <canvas id="myChart"></canvas>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
					
				
                    <div id = "footer"></div>
        </div>
    </div>
    <script>

        var params ={};
        var  regex =/([^&=]+)=([^&]*)/g, m;
        while( m= regex.exec(location.href)){
            params[decodeURIComponent(m[1])]=decodeURIComponent(m[2])
        }
        if(Object.keys(params).length>0){
            localStorage.setItem('authInfo',JSON.stringify(params))
        }
        window.history.pushState({},document.title,"/"+ "Dashboard/dashboard.html") 
        let info = JSON.parse(localStorage.getItem('authInfo'));
        console.log(JSON.parse(localStorage.getItem('authInfo')));
        console.log(info['access_token']);
        console.log(info['expires_in'])
        fetch("https://www.googleapis.com/oauth2/v3/userinfo",{
            headers:{
                "Authorization":`Bearer ${info['access_token']}`
            }
        })
        .then((data)=>data.json())
        .then((info)=>{
            localStorage.setItem("email", info.email)
            console.log(info)
            document.getElementById('name').innerHTML+=info.name
            document.getElementById('image').setAttribute('src',info.picture);
        })
         function logout(){
            fetch("https://oauth2.googleapis.com/revoke?token=" +info['access_token'],{
                method:'POST',
                headers:{
                    'Content-type':'application/x-www-form-urlencoded'
                }
            })
            .then((data)=>{
                location.href="http://localhost:5500"
            })
         }

        
        </script>

     <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   <script src="../Sidebar js/jquery-3.3.1.slim.min.js"></script>
   <script src="../Sidebar js/popper.min.js"></script>
   <script src="../Sidebar js/bootstrap.min.js"></script>
   <script src="../Sidebar js/jquery-3.3.1.min.js"></script>
  
  
   <script type="text/javascript">
    let ctx = document.getElementById("myChart").getContext("2d");
    let myChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
          "Sunday",
        ],
        datasets: [
          {
            label: "income",
            data: [],
            backgroundColor: "rgba(167, 236, 238, 0.6)",
          },
          {
            label: "expenses",
            data: [], 
            backgroundColor: "rgba(154, 197, 244, 0.6)",
          },
        ],
      },
    });
  
    $(document).ready(function () {
      $('#sidebarCollapse').on('click', function () {
        $('#sidebar').toggleClass('active');
        $('#content').toggleClass('active');
      });
  
      $('.more-button,.body-overlay').on('click', function () {
        $('#sidebar,.body-overlay').toggleClass('show-nav');
      });
    });
  </script>
  <script src="./dashboard.js"></script>

<script> 
    $(function(){
      $("#header").load("../Components/header.html");
      $("#sidebar").load("../Components/sidebar.html");
      $("#footer").load("../Components/footer.html"); 
    });
</script>


  </body>
  
  </html>
